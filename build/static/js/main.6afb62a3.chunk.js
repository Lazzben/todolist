(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(23),s=n.n(i),c=(n(92),n(67),n(4)),r=n(7),l=n(8),u=n(10),d=n(9),p=n(11),h=(n(48),n(17)),m=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onSubmit=function(e){"Enter"===e.key&&n.props.onSubmit(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,{placeholder:"\u5728\u8fd9\u91cc\u8f93\u5165\u4ee3\u529e\u4e8b\u9879\uff0c\u6309\u56de\u8f66\u63d0\u4ea4",type:"text",value:this.props.content,onChange:this.props.inputValue,onKeyPress:this.onSubmit})}}]),t}(o.a.Component),f=(n(142),n(85)),g=(n(144),function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e){this.props.completeTodo(e)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"todoitem"},o.a.createElement(f.a,{onChange:function(){return e.onChange(e.props.todo.id)}},this.props.todo.description),o.a.createElement(c.a,{type:"close-circle",style:{color:"rgb(24,114,255)",cursor:"pointer"},onClick:function(){return e.props.deleteTodo(e.props.todo.id)}}))}}]),t}(o.a.Component)),v=(n(49),n(18)),b=n(65),S=n(5),O=n.n(S);O.a.init({appId:"LDkpdb4bwEXfkKvfMgS6lfWo-gzGzoHsz",appKey:"f6BMgzFyGAxnT95EFbSpwkfC"});O.a;var w={getByUser:function(e,t,n){new O.a.Query("Todo").find().then(function(e){console.log(e);var n=e.map(function(e){return Object(b.a)({id:e.id},e.attributes)});t.call(null,n)},function(e){n&&n.call(null,e)})},create:function(e,t,n){var a=e.description,o=e.completed,i=e.deleted,s=new(O.a.Object.extend("Todo"));s.set("description",a),s.set("completed",o),s.set("deleted",i);var c=new O.a.ACL;c.setPublicReadAccess(!1),c.setWriteAccess(O.a.User.current(),!0),c.setReadAccess(O.a.User.current(),!0),s.setACL(c),s.save().then(function(e){t.call(null,e.id)},function(e){n&&n.call(null,e)})},update:function(e,t,n){var a=e.id,o=e.title,i=e.completed,s=e.deleted,c=O.a.Object.createWithoutData("Todo",a);void 0!==o&&c.set("title",o),void 0!==i&&c.set("completed",i),void 0!==s&&c.set("deleted",s),c.save().then(function(e){t&&t.call(null)},function(e){return n&&n.call(null,e)})},destroy:function(e,t,n){O.a.Object.createWithoutData("Todo",e).destroy().then(function(e){t&&t.call(null)},function(e){n&&n.call(null,e)})}};function E(){var e=O.a.User.current();return e?y(e):null}function y(e){return Object(b.a)({id:e.id},e.attributes)}var j=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChangeLogInUserName=function(e){n.setState({acount:e.target.value})},n.onChangeLogInPassword=function(e){n.setState({password:e.target.value})},n.signInSubmit=function(){var e=n.state;!function(e,t,n,a){O.a.User.logIn(e,t).then(function(e){var t=y(e);n.call(null,t)},function(e){a.call(null,e)})}(e.acount,e.password,function(e){n.props.userSignIn(e),console.log(e)},function(e){switch(e.code){case 210:alert("\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u4e0d\u5339\u914d");break;default:alert(e)}})},n.state={acount:"",password:"",email:""},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.acount,n=e.password;return o.a.createElement("div",{className:"box logIn"},o.a.createElement("h1",null,"ToDo-List"),o.a.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:t,onChange:this.onChangeLogInUserName}),o.a.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:n,onChange:this.onChangeLogInPassword}),o.a.createElement(v.a,{block:!0,type:"primary",onClick:this.signInSubmit},"\u767b\u5f55"),o.a.createElement("p",null,"\u82e5\u6ca1\u6709\u8d26\u53f7\u8bf7 ",o.a.createElement("span",{onClick:this.props.selectSignUp},"\u6ce8\u518c")))}}]),t}(o.a.Component),C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChangeLogUpUserName=function(e){n.setState({acount:e.target.value})},n.onChangeLogUpPassword=function(e){n.setState({password:e.target.value})},n.signUpSubmit=function(){var e=n.state;!function(e,t,n,a){var o=new O.a.User;o.setUsername(e),o.setPassword(t),o.signUp().then(function(e){var t=y(e);n.call(null,t)},function(e){a.call(null,e)})}(e.acount,e.password,function(e){n.props.userSignIn(e)},function(e){switch(e.code){case 202:alert("\u7528\u6237\u540d\u5df2\u88ab\u5360\u7528");break;default:alert(e)}})},n.state={acount:"",password:"",email:""},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.acount,n=e.password;return o.a.createElement("div",{className:"box logUp"},o.a.createElement("h1",null,"ToDo-List"),o.a.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:t,onChange:this.onChangeLogUpUserName}),o.a.createElement(h.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:n,onChange:this.onChangeLogUpPassword}),o.a.createElement(v.a,{block:!0,type:"primary",onClick:this.signUpSubmit},"\u6ce8\u518c"),o.a.createElement("p",null,"\u82e5\u5df2\u6709\u8d26\u53f7\u8bf7 ",o.a.createElement("span",{onClick:this.props.selectSignIn},"\u767b\u5f55")))}}]),t}(o.a.Component),k=(n(150),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).selectSignUp=function(){n.setState({selected:"SignUp"})},n.selectSignIn=function(){n.setState({selected:"SignIn"})},n.state={selected:"SignIn"},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"userdialog"},"SignIn"===this.state.selected?o.a.createElement(j,{userSignIn:this.props.userSignIn,selectSignUp:this.selectSignUp.bind(this)}):o.a.createElement(C,{userSignIn:this.props.userSignIn,selectSignIn:this.selectSignIn.bind(this)}))}}]),t}(o.a.Component)),N=(n(151),function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).inputValue=function(e){n.setState({newTodo:e.target.value})},n.addTodo=function(e){console.log(e);var t={description:e.target.value,completed:!1,deleted:!1};w.create(t,function(e){t.id=e,n.state.todoList.push(t),n.setState({todoList:n.state.todoList,newTodo:""})},function(e){console.log(e)})},n.userSignIn=function(e){var t=JSON.parse(JSON.stringify(n.state));t.user=e,n.setState(t)},n.signOut=function(){O.a.User.logOut();var e=JSON.parse(JSON.stringify(n.state));e.user={},n.setState(e)},n.deleteTodo=function(e){var t=JSON.parse(JSON.stringify(n.state)).todoList.map(function(t){return t.id===e?(w.update({id:t.id,deleted:!0}),t.deleted=!0,t):t});n.setState({todoList:t})},n.completeTodo=function(e){var t=JSON.parse(JSON.stringify(n.state)).todoList.map(function(t){return t.id===e?(w.update({id:t.id,completed:!0}),t.completed=!0,t):t});n.setState({todoList:t})},n.state={user:E()||{},todoList:[],newTodo:"",selected:"doing"};var a=E();return a&&w.getByUser(a,function(e){var t=JSON.parse(JSON.stringify(n.state));t.todoList=e,n.setState(t)}),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=("doing"===this.state.selected?this.showTodo:this.showcompleteTodo).map(function(t,n){return o.a.createElement("li",{key:t.id},o.a.createElement(g,{todo:t,deleteTodo:e.deleteTodo.bind(e),completeTodo:e.completeTodo.bind(e)}))});return o.a.createElement("div",{className:"App"},this.state.user.id?null:o.a.createElement(k,{userSignIn:this.userSignIn.bind(this)}),this.state.user.id?o.a.createElement("div",{id:"todolist-container"},o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"logo"},"lazzben To-Do"),o.a.createElement(c.a,{className:"logout",type:"logout",onClick:this.signOut.bind(this)})),o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"aside"},o.a.createElement("div",{className:"user"},this.state.user.username,"\u7684\u5f85\u529e"),o.a.createElement("div",{className:"doing",onClick:function(){return e.setState({selected:"doing"})}},o.a.createElement(c.a,{type:"clock-circle",theme:"twoTone"})," \u8fdb\u884c\u4e2d"),o.a.createElement("div",{className:"completed",onClick:function(){return e.setState({selected:"completed"})}},o.a.createElement(c.a,{type:"check-circle",theme:"twoTone"})," \u5df2\u5b8c\u6210")),o.a.createElement("div",{className:"todo"},o.a.createElement(m,{content:this.state.newTodo,inputValue:this.inputValue.bind(this),onSubmit:this.addTodo.bind(this)}),o.a.createElement("ul",null,t)))):null)}},{key:"showTodo",get:function(){return this.state.todoList.filter(function(e){return!e.deleted&&!e.completed})}},{key:"showcompleteTodo",get:function(){return this.state.todoList.filter(function(e){return!e.deleted&&e.completed})}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,n){e.exports=n(152)},92:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.6afb62a3.chunk.js.map